<script>
	$(document).ready(function() {
		$('.js-example-basic-multiple').select2();
	});

	
</script>
<script>
	$("#datepicker").datepicker({
		format: 'yyyy-mm-dd'
	});
</script>
<script>
	$(document).ready(function() {
		$("#couponSubmitBtn").click(function(e){
			e.preventDefault();
			var newCoupon = {};
			newCoupon.coupon_name = "XYZ Coupon";
			newCoupon.code = "XYZ0010";
			newCoupon.discount_type = 1;
			newCoupon.discount_value = 20;
			newCoupon.publish_date = "2018-05-29";
			newCoupon.status = 1;

			$.ajax({
				type: 'POST',
				url: '/api/coupons',
				data: newCoupon,
				success: function(data, text) {
					console.log('data', data);
					console.log('text', text);
					window.location.href = '/coupons';
				},
				error: function(request, status, error) {
					console.log('status', status);
					console.log('error', error);
				}
			});
		});

		$("#couponUpdateBtn").click(function(e){
			e.preventDefault();
			var id = $('input[name=id]').val();
				var newCoupon = {};
			newCoupon.coupon_name = "ABC Coupon";
			newCoupon.code = "ABC0010";
			newCoupon.discount_type = 1;
			newCoupon.discount_value = 10;
			newCoupon.publish_date = "2018-05-29";
			newCoupon.status = 1;
			newCoupon.vendor_id = 29;
			console.log(e);

			$.ajax({
				type: 'PUT',
				url: '/api/coupons/'+id,
				data: newCoupon,
				success: function(data, text) {
					console.log('data', data);
					console.log('text', text);
					window.location.href = '/coupons';
				},
				error: function(request, status, error) {
					console.log('status', status);
					console.log('error', error);
				}
			});
		});
	});
</script>
{{> vendor/header}} 
<section class="showing_categ">
	<div class="" >
		<div class="container">
			<div class="row">
				{{> vendor/navbar}} 
				<div class="col-md-8" style="background-color: #fff;">
					<form id="couponForm">
						<h5 style="padding-top: 20px;"> 
							{{#ifCond Coupons.id "==" undefined}}
							Add Coupon
							{{else}}
							Edit Coupon
							<input type="hidden"  name="id" value="{{Coupons.id}}" />
							{{/ifCond}}
						</h5>
						<div class="row">
							<div class="col-md-12">
								<input type="text" name="coupon_name" required value="{{Coupons.coupon_name}}" placeholder="Coupon Name" class="vend_edit_lists_textstyle"  />
							</div>
							<div class="col-md-12">
								<select class="vend_edit_lists_dropdownstyle" name="discount_type" value="">
									{{#select Coupons.discount_type}}
									<option >Discount Type</option>
									<option value="1">Percentage</option>
									<option value="2">Fixed Price</option>
									<option value="3">Fixed Price Discount</option>
									<option value="4">Fixed Cart Discount</option>
									{{/select}}
								</select>
							</div>
							<div class="col-md-12">
								<input type="text" placeholder="0" class="vend_edit_lists_textstyle1" />
							</div>
							<div class="col-md-12">
								<input type="text" name="expiry_date" placeholder="Expiry Date" class="vend_edit_lists_textstyle1" id="datepicker" value="{{Coupons.expiry_date}}"/>
								<span class="vend_edit_list_spanstyle"> Expiry Date</span>
							</div>
							<div class="col-md-12">
								<input type="text" name="minimum_spend" placeholder="Minimum Spend" class="vend_edit_lists_textstyle1" value="{{Coupons.minimum_spend}}"/><span class="vend_edit_list_spanstyle">Set the Minimum spend (including subtotal with taxes) allwoed to use the coupon</span>
							</div>
							<div class="col-md-12">
								<input type="text" name="maximum_spend" placeholder="Maximum Spend" class="vend_edit_lists_textstyle1" value="{{Coupons.individual_use_only}}"/><span class="vend_edit_list_spanstyle">Set the Maximum spend (including subtotal with taxes) allwoed to use the coupon</span>
							</div>
							<div class="col-md-12">
								{{#ifCond Coupons.individual_use_only "==" 1}}
								<input type="checkbox" name = "individual_use_only" checked=""><span class="vend_edit_list_spanstyle">
								{{ else}}
								<input type="checkbox" name = "individual_use_only" ><span class="vend_edit_list_spanstyle">
								{{/ifCond}}
								<b>Individual use only.</b> Check this box if the coupon cannot be used in conjunction with other coupons</span>

							</div>
							<div class="col-md-12">
								{{#ifCond Coupons.excluse_sale_item "==" 1}}
								<input type="checkbox" name = "excluse_sale_item" checked=""><span class="vend_edit_list_spanstyle">
								{{ else}}
								<input type="checkbox" name = "excluse_sale_item" ><span class="vend_edit_list_spanstyle">
								{{/ifCond}}
								<b>Excluse sale Item.</b> Check this box if the coupon should not apply to items on sale. Per-item coupons will only work if the item is not on sale. Per-cart coupons will only work if there are no sale items iin the cart.</span>
							</div>
							<div class="col-md-12">
								<select class="js-example-basic-multiple vend_edit_lists_dropdownstyle" name="state"  multiple="multiple" placeholder="Search for a product.." > 
									{{#select Coupons.discount_type}}
									<option value="AL">Alabama</option>
									<option value="WY">Wyoming</option>
									{{/select}}
								</select>
								{{!-- <input type="text" placeholder="Search for a product.." class="vend_edit_lists_textstyle1" /> --}}<span class="vend_edit_list_spanstyle">Products which need to be in the cart for this coupon to be applicable</span>
							</div>
							<div class="col-md-12">
								{{!-- <input type="text" placeholder="Exclude products.." class="vend_edit_lists_textstyle1" /> --}}
								<select class="js-example-basic-multiple vend_edit_lists_dropdownstyle" name="state"  multiple="multiple"  placeholder="Exclude products.." >
									{{#select Coupons.discount_type}}
									<option value="AL">Alabama</option>
									<option value="WY">Wyoming</option>
									{{/select}}
								</select>
								<span class="vend_edit_list_spanstyle">Products which must not be in the cart for this coupon to be applicable</span>
							</div>
							<div class="col-md-12">
								<input type="text" placeholder="Product Categories" class="vend_edit_lists_textstyle1" /><span class="vend_edit_list_spanstyle">Products must be in this category for this coupon to be applicable</span>
							</div>
							<div class="col-md-12">
								<input type="text" placeholder="Exclude Categories" class="vend_edit_lists_textstyle1" /><span class="vend_edit_list_spanstyle">Products must not be in this category for this coupon to be applicable</span>
							</div>
							<div class="col-md-12">
								<input type="text" placeholder="Usage Limit"  class="vend_edit_lists_textstyle1" name="usage_limit" value="{{Coupons.usage_limit}}" ><span class="vend_edit_list_spanstyle">How many times this coupon can be used before it is void (default is unlimited)</span>
							</div>
							<div class="col-md-12">
								<input type="text" name="limit_usage_to_x_items" value="{{Coupons.limit_usage_to_x_items}}" placeholder="Limit usage to X items" class="vend_edit_lists_textstyle1" /><span class="vend_edit_list_spanstyle">The maximum items this coupon can be applied to when using product discount (default is all)</span>
							</div>
							<div class="col-md-12">
								<input type="text" name="usage_limit_per_user" value="{{Coupons.usage_limit_per_user}}" placeholder="usage limit per user" class="vend_edit_lists_textstyle1" /><span class="vend_edit_list_spanstyle">How many times this coupons can be used by an individual (default is unlimited)</span>
							</div>
						</div>
						<hr/>
						<div class="row">
							<div class="col-md-12">
								{{#ifCond Coupons.id "==" undefined}}
								<button class="list_butt_1" type="button" id="couponSubmitBtn">Submit</button>
								{{else}}
								<button class="list_butt_1" type="button" id="couponUpdateBtn">Update</button>
								{{/ifCond}}
								<button class="list_butt_2" type="reset" id="couponCancelBtn">Cancel</button>								
							</div>
						</div>
						
						<div class="row">
							<div class="col-md-12">
								<p class="vend_edit_lists_pstyle"></p>
							</div>
						</div>
					</form>
				</div>
				<div class="col-md-2">
				</div>				
			</div>
		</div>
	</div>
</section>