<style>
	.clickable-row {
		cursor: pointer;
	}
</style>
<script>
	$(document).ready(function() {
		$('.clickable-row').click(function() {
			document.getElementById("Subject").innerHTML = $(this).data('name');
			document.getElementById("Message").innerHTML = $(this).data('message');
			if ($(this).hasClass("inbox-tr-unread")) {
				$(this).removeClass("inbox-tr-unread").addClass("inbox-tr");
				$.ajax({
					url: 'api/notification/read/' + $(this).data('id'),
					type: 'GET',
					success: function(data) {
						console.log(data);
					},
					error: function(error) {
						console.log(error);
					}
				})
			}
		});

		$('.clickable-row').magnificPopup({
			type: 'inline',
			midClick: true,
			preloader: false,
			modal: true
		});
		$(document).on('click', '.popup-modal-dismiss', function(e) {
			e.preventDefault();
			$.magnificPopup.close();
		});
	});
</script> {{> header/top-header LoggedInUser = LoggedInUser}}{{> vendor/vendor-menu}}

<div class="wrapper-content bg-gray">
	<div class="gtc-container">
		<div class="row">
			<div class="col-sm-2">
				{{> vendor/vendor-side-navbar}}
			</div>
			<div class="col-sm-10">
				<div class="ibox">
					<div class="ibox-content">
						<div class="content-body">
							<p class="content-txt"></p>
							<div class="col-md-12">
								<div class="table-responsive">
									<table class="table">
										<thead>
											<tr>
												<th><input type="checkbox" onclick="selectAll(this);"></th>
												<th scope="col">Event</th>
												<th scope="col">Code</th>
												<th scope="col">Description</th>
												<th scope="col">Date</th>
												<th scope="col">Status</th>
												{{!-- <th scope="col">Size</th> --}}
											</tr>
										</thead>
										<tbody>
											{{#each notifications}}

											<tr class="{{#ifCond this.is_read '==' 1}}inbox-tr-unread{{else}}inbox-tr{{/ifCond}} clickable-row" data-name="{{this.name}}" data-id={{this.id}} data-message="{{this.description}}" href="#test-modal">
													<td><input type="checkbox" value="{{this.id}}"></td>
													<td scope="row ">{{this.name}}</td>
													<td scope="row ">{{this.code}}</td>
													<td scope="row">{{this.description}}</td>
													<td scope="row">{{formatTime this.Mail.created_on "MMM D, YYYY"}}</td>
													<td scope="row" id='{{this.id}}' data-href=''>{{objectKey ../statusCode this.status}}</td>
												</tr>
												{{/each}}
										</tbody>
									</table>
								</div>
								{{#pagination collectionSize page pageSize maxSize}}
								<nav aria-label="Page navigation example">
									<ul class="pagination justify-content-center">
										{{#unless startFromFirstPage}}
										<li class="page-item">
											<a class="page-link" href="gtc-mail/inbox?page={{DiffFloat ../page 1}}&limit={{../pageSize}}">Previous</a>
										</li>
										{{/unless}} {{#each pages}}
										<li class="page-item {{#if isCurrent}} active {{/if}}">
											<a class="page-link" href="gtc-mail/inbox?page={{page}}&limit={{../../pageSize}}">{{page}}</a>
										</li>
										{{/each}} {{#unless endAtLastPage}}
										<li class="page-item">
											<a class="page-link" href="gtc-mail/inbox?page={{SUMFloat ../page 1}}&limit={{../pageSize}}">Next</a>
										</li>
										{{/unless}}
									</ul>
								</nav>
								{{/pagination}}
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div id="test-modal" class="white-popup-block mfp-hide">
	<h1 id ="Subject"></h1>
	<p id="Message"></p>
	<p><a class="popup-modal-dismiss" href="#">Dismiss</a></p>
</div>
{{> footer/bottom-footer}} 
