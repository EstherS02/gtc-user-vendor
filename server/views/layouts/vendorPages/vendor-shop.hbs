<script type="text/javascript">

    var queryURI = {{{DisplayJSON queryURI}}}

    function updateQueryStringParameter(uri, key, value) {
      var re = new RegExp("([?&])" + key + "=.*?(&|$)", "i");
      var separator = uri.indexOf('?') !== -1 ? "&" : "?";
      if (uri.match(re)) {
        return uri.replace(re, '$1' + key + "=" + value + '$2');
    }
    else {
        return uri + separator + key + "=" + value;
    }
}

$(document).on('change', "#sortListing", function() {
  var uri = window.location.href;
  var optionValue = $("#sortListing option:selected").val();
  var key='order';
  var value='desc';
  if(optionValue== 'Oldest'){
    value='asc';
}
var queries = updateQueryStringParameter(uri,key,value);
window.location.href = queries;
});
</script>

{{> header/top-header LoggedInUser = LoggedInUser}}

{{> vendor/vendor-header VendorDetail = VendorDetail}}

<section class="vendor-product bg-gray">
    <div class="gtc-container">
        <div class="row">
            <div class="col-md-2">
                {{> vendor/vendor-left VendorDetail = VendorDetail}}
            </div>
            <div class="col-md-10">
                <div class="header-lg bg-shop">
                <h2 class="header-lg-text">PRODUCT SHOP <p class="see-all">{{#if publicShop.count}} Showing
                        <b>{{SUMFloat queryPaginationObj.offset 1}}-{{upperCount queryPaginationObj.limit queryPaginationObj.offset publicShop.count}}</b> of
                        <b>{{publicShop.count}}</b>{{/if}}
                    </p></h2>
                </div>
                <div class="row">
                    <div class="col-md-9">
                        <div class="ibox">
                            <div class="ibox-content">
                                <div class="row">
                                    {{#each publicShop.rows}}
                                    <div class="col-md-6">
                                        <div class="product-body">
                                            <div class="table-responsive">
                                                <table class="table shoping-cart-table">
                                                    <tbody>
                                                        <tr class="d-flex">
                                                            <td class="col-2">
                                                                <div class="product-left-col">
                                                                    <img class="object-fit" src="{{this.product_base_image}}" alt="{{this.product_name}}" title="{{this.product_name}}">
                                                                </div>
                                                            </td>
                                                            <td class="col-7">
                                                                <div class="product-middle-col">
                                                                    <h3>
                                                                        <a href="/shop/{{this.product_slug}}/{{this.id}}" class="text-blue">{{this.product_name}}</a>
                                                                    </h3>
                                                                    <div class="row no-margins">
                                                                        <div class="col-md-3 col-3 no-padding">
                                                                            <span>Origin</span>
                                                                        </div>
                                                                        <div class="col-md-9 col-9 no-padding overflow-txt">
                                                                            <span class="text-500">{{this.country_name}}</span>
                                                                        </div>
                                                                        <div class="col-md-3 col-3 no-padding">
                                                                            <span>Category</span>
                                                                        </div>
                                                                        <div class="col-md-9 col-9 no-padding overflow-txt">
                                                                            <a class="text-500" href="#" title="{{this.category_name}} > {{this.sub_category_name}}">{{this.category_name}} > {{this.sub_category_name}}</a>
                                                                        </div>
                                                                        <div class="col-md-3 col-3 no-padding">
                                                                            <span>Seller</span>
                                                                        </div>
                                                                        <div class="col-md-9 col-9 no-padding overflow-txt">
                                                                            {{#if ../LoggedInUser.email}}
                                                                            <a class="text-500" title="{{this.vendor_name}}" href="/vendor/{{this.vendor_id}}">{{this.vendor_name}}</a>
                                                                            {{else}}
                                                                            <a class="text-500" href="/login">(Login for Seller Info)</a>
                                                                            {{/if}}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td class="col-3">
                                                                <div class="product-right-col">
                                                                    {{!-- <small class="text-red">24h 12m left</small> --}}
                                                                    <h2 class="text-red">${{this.product_price}}</h2>
                                                                    <div class="prc-bottom">
                                                                        <p>Seller Rating</p>
                                                                        <div class="p-rating pull-right">
                                                                            {{starCount product_rating}}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    {{/each}}
                                </div>
                                {{#ifCond publicShop.count '>' queryPaginationObj.limit}}
                                <div class="row">
                                    <div class="col-md-3">
                                    </div>
                                    <div class="col-md-7">
                                        {{#pagination publicShop.count queryPaginationObj.page queryPaginationObj.limit queryPaginationObj.maxSize}}
                                        <nav aria-label="Page navigation example">
                                            <ul class="pagination justify-content-center">
                                                {{#unless startFromFirstPage}}
                                                <li class="page-item">
                                                    <a class="page-link" href="../vendor/shop/{{../../VendorDetail.id}}?{{QueryParams ../queryURI (FrameObject page=(DiffFloat ../queryPaginationObj.page 1) limit=../queryPaginationObj.limit) 'null'}}">Previous</a>
                                                </li>
                                                {{/unless}} {{#each pages}}
                                                <li class="page-item {{#if isCurrent}} active {{/if}}">
                                                    <a class="page-link" href="../vendor/shop/{{../../VendorDetail.id}}?{{QueryParams ../../queryURI (FrameObject page=page limit=../../queryPaginationObj.limit) 'null'}}">{{page}}</a>
                                                </li>
                                                {{/each}} {{#unless endAtLastPage}}
                                                <li class="page-item">
                                                    <a class="page-link" href="../vendor/shop/{{../../VendorDetail.id}}?{{QueryParams ../queryURI (FrameObject page=(SUMFloat ../queryPaginationObj.page 1) limit=../queryPaginationObj.limit) 'null'}}">Next</a>
                                                </li>
                                                {{/unless}}
                                            </ul>
                                        </nav>
                                        {{/pagination}}
                                    </div>
                                </div>
                                {{/ifCond}}
                                <div class="col-md-6">
                                    <label class="label-control">Showing
                                        <b>{{SUMFloat queryPaginationObj.offset 1}}-{{upperCount queryPaginationObj.limit queryPaginationObj.offset publicShop.count}}</b> of
                                        <b>{{publicShop.count}}</b> Products matching
                                        {{#if queryPaginationObj.keyword}}
                                        <span><b>"{{queryPaginationObj.keyword}}"</b>{{/if}}</span>
                                        {{#if selectedMarketPlace}}
                                        in the <span class="showing_global_col">{{selectedMarketPlace.name}}</span>
                                        {{/if}}
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="ibox">
                            <div class="ibox-content p-n-l p-n-r bg-transparent">
                                <div class="showing_categ">
                                    <p><b>FILTER BY CATEGORY</b></p>
                                    <p class="cat_bg_title_shp">ALL CATEGORIES ({{categoriesWithCount.count}})</p>
                                    {{> vendor/vendor-category }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- <section>
   <div class="logged_in_cont">
        <div class="container">
        <div class="row">
            <div class="col-md-2 col-12 ">
                
            </div>
            <div class="col-md-10 col-12">
                <div class="row pmp1">
                    <div class="col-md-5 col-12">
                        <h5>PRODUCT SHOP</h5>
                    </div>
                    <div class="col-md-2 col-12 common_padding1">
                       <p class="showing_res1">Showing
                        <b>{{SUMFloat queryPaginationObj.offset 1}}-{{upperCount queryPaginationObj.limit queryPaginationObj.offset publicShop.count}}</b> of
                        <b>{{publicShop.count}}</b>
                    </p>
                </div>
                <div class="col-md-2 col-12 common_padding1">
                    <select class="geo_textbox" id="sortListing">
                        <option>Select option</option>
                        <option value="Newest">Sort by Newest</option>
                        <option value="Oldest">Sort by order</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <div class="col-md-9 col-12" style="background-color: #fff;">
                    <section class="box6" style="margin-bottom: 20px;">
                        <div class="container clearfix">
                            <div class="row">
                                {{#each publicShop.rows}}
                                <div class="col-md-4 col-12 common_top">
                                    <div class="row">
                                        <div class="col-md-3 col-2">
                                            <img src="{{this.product_base_image}}" style="width: 30px; height: 70px;">
                                        </div>
                                        <div class="col-md-9 col-10">
                                            <div class="row common_padding">
                                                <div class="col-md-8 col-8">
                                                    <p class="wts_header">
                                                        <a href="wholesale/{{this.product_slug}}/{{this.id}}">{{this.product_name}}</a>
                                                    </p>
                                                </div>
                                                <div class="col-md-4 col-4">
                                                    <p class="">${{this.product_price}}CAD</p>
                                                </div>
                                            </div>
                                            <div class="row common_padding">
                                                <div class="col-md-3 col-3">
                                                    <p>Origin</p>
                                                </div>
                                                <div class="col-md-5 col-5">
                                                    <p>{{this.country_name}}</p>
                                                </div>
                                                <div class="col-md-4 col-4">
                                                    <p>&nbsp;</p>
                                                </div>
                                            </div>
                                            <div class="row common_padding">
                                                <div class="col-md-3 col-3">
                                                    <p>Category</p>
                                                </div>
                                                <div class="col-md-5 col-5">
                                                    <p>{{this.category_name}} - {{this.sub_category_name}}</p>
                                                </div>
                                                <div class="col-md-4 col-4">
                                                    <p>Seller Rating</p>
                                                </div>
                                            </div>
                                            <div class="row common_padding">
                                                <div class="col-md-3 col-3">
                                                    <p>Seller</p>
                                                </div>
                                                <div class="col-md-5 col-5">
                                                    <p>{{#if ../LoggedInUser.email}}
                                                      <a>{{this.vendor_name}}</a>
                                                      {{else}}
                                                      <a href="/login">(Login for Seller Info)</a>
                                                      {{/if}}</p>
                                                  </div>
                                                  <div class="col-md-4 col-4">
                                                    <p>{{ starCount product_rating}}
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {{/each}}
                            </div>
                        </div>
                    </section>
                    {{#ifCond publicShop.count '>' queryPaginationObj.limit}}
                    <div class="row">
                        <div class="col-md-3">
                        </div>
                        <div class="col-md-7">
                            {{#pagination publicShop.count queryPaginationObj.page queryPaginationObj.limit queryPaginationObj.maxSize}}
                            <nav aria-label="Page navigation example">
                                <ul class="pagination justify-content-center">
                                    {{#unless startFromFirstPage}}
                                    <li class="page-item">
                                        <a class="page-link" href="../vendor/shop/{{../../VendorDetail.id}}?{{QueryParams ../queryURI (FrameObject page=(DiffFloat ../queryPaginationObj.page 1) limit=../queryPaginationObj.limit) 'null'}}">Previous</a>
                                    </li>
                                    {{/unless}} {{#each pages}}
                                    <li class="page-item {{#if isCurrent}} active {{/if}}">
                                        <a class="page-link" href="../vendor/shop/{{../../VendorDetail.id}}?{{QueryParams ../../queryURI (FrameObject page=page limit=../../queryPaginationObj.limit) 'null'}}">{{page}}</a>
                                    </li>
                                    {{/each}} {{#unless endAtLastPage}}
                                    <li class="page-item">
                                        <a class="page-link" href="../vendor/shop/{{../../VendorDetail.id}}?{{QueryParams ../queryURI (FrameObject page=(SUMFloat ../queryPaginationObj.page 1) limit=../queryPaginationObj.limit) 'null'}}">Next</a>
                                    </li>
                                    {{/unless}}
                                </ul>
                            </nav>
                            {{/pagination}}
                        </div>
                    </div>
                    {{/ifCond}}
                    <div class="col-md-6">
                        <p class="showing_res1">Showing
                            <b>{{SUMFloat queryPaginationObj.offset 1}}-{{upperCount queryPaginationObj.limit queryPaginationObj.offset publicShop.count}}</b> of
                            <b>{{publicShop.count}}</b> Products matching
                            {{#if queryPaginationObj.keyword}}
                            <span><b>"{{queryPaginationObj.keyword}}"</b>{{/if}}</span>
                            {{#if selectedMarketPlace}}
                            in the <span class="showing_global_col">{{selectedMarketPlace.name}}</span>
                            {{/if}}
                        </p>
                    </div>
                    
                </div>
                <div class="col-md-3 col-12 showing_categ">
                    <p><b>FILTER BY CATEGORY</b></p>
                    <p class="cat_bg_title_shp">ALL CATEGORIES ({{categoriesWithCount.count}})</p>
                    {{> vendor/vendor-category }}
                </div>
            </div>
        </div>
        </div>
    </div>
</section> -->
{{> footer/bottom-footer}}