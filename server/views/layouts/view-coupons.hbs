<script  type="text/javascript">
	function selectAll(ele) {
		var checkboxes = document.getElementsByTagName('input');
		if (ele.checked) {
			for (var i = 0; i < checkboxes.length; i++) {
				if (checkboxes[i].type == 'checkbox') {
					checkboxes[i].checked = true;
				}
			}
		} else {
			for (var i = 0; i < checkboxes.length; i++) {
				console.log(i)
				if (checkboxes[i].type == 'checkbox') {
					checkboxes[i].checked = false;
				}
			}
		}
	}

	function changeStatus(e) {
		window.location.href = '/coupons?status=' + e.value;
	}

	function changeLimit(e) {
		window.location.href = '/coupons?limit=' + e.value;
	}

	function edit(e) {
		var chkArray = [];
		$(':checkbox:checked').each(function(i) {
			chkArray.push($(this).val());
		});
		var selected;
		selected = chkArray.join(',');
		if (selected.length > 0) {
			window.location.href = '/coupons/edit-coupons?id=' + selected;
		} else {
			alert("Please at least check one of the checkbox");
		}
	}
	function create(e){
		window.location.href = '/coupons/add-coupon';
	}
	function searchName(e,ths){
		if(e.keyCode == 13) {
			window.location.href = '/coupons?name=' + $(ths).val();
		}
	}

</script>
{{> header/defaultHeader LoggedInUser = LoggedInUser}}
{{> vendor/header}}
<section class="showing_categ">
	<div class="" >
		<div class="container">
			<div class="row">
				{{> vendor/navbar}} 
				<div class="col-md-8" style="background-color: #fff;">
					<p class="vend_edit_lists_pstyle"></p>
					<div class="row">
						<div class="col-md-10">
							<input type="submit" onclick="create(this)" value="ADD COUPON" class="vend_edit_lists_buttonstyle" />
							<select class="vend_edit_lists_buttonstyle" onChange="changeStatus(this);">
								<option disabled selected>CHANGE STATUS</option>
								<option value="ACTIVE">Active</option>
								<option value="INACTIVE">InActive</option>
								<option value="SUSPENDED">Suspended</option>
								<option value="SOLDOUT">Sold Out</option>
							</select>
							<input type="submit" onclick="edit(this)" value="EDIT / FEATURE" class="vend_edit_lists_buttonstyle" />
						</div>
						<div class="col-md-2">
							<input type="text" placeholder="Search Coupons" class="vend_edit_lists_searchstyle float-right" onkeypress="searchName(event,this)" />
						</div>
					</div>
					<div class="row">
						<div class="col-md-6">
							<p class="vend_edit_lists_pstyle">{{this.count}} items total</p>
						</div>
						<div class="col-md-6">
							<p class="vend_edit_lists_pstyle float-right">Entries per page: 
								<a href="/coupons?limit=10"> 10</a>
								<a href="/coupons?limit=25"> 25</a>
								<a href="/coupons?limit=100"> 100</a>
								<a href="/coupons?limit=10"> All </a>
							</p>
						</div>
					</div>
					<div class="row">
						<table class="table table-hover">
							<thead>
								<tr>
									<th><input type="checkbox" onclick="selectAll(this);"></th>
									<th>Coupon Name</th>
									<th>Publish Date</th>
									<th>Type</th>
									<th>Sales</th>
									<th>Discount</th>
									<th>Status</th>
								</tr>
							</thead>
							<tbody>
								{{#each Coupons}}
								<tr>
									<td><input type="checkbox" value="{{this.id}}" ></td>
									<td class="text_blue_color">{{this.coupon_name}}</td>
									<td>{{formatTime this.publish_date "MMM D YY"}}</td>
									{{!-- DiscountType --}}
									{{#ifCond this.discount_type "==" ../discountType.Percentage}}
									<td>Percentage</td> 
									{{else ifCond this.discount_type "==" ../discountType.FixedPrice}}
									<td>Fixed Price</td>
									{{else ifCond this.discount_type "==" ../discountType.FixedPriceDiscount}}
									<td>Fixed Price Discount</td> 
									{{else ifCond this.discount_type "==" ../discountType.FixeCartDiscount}}
									<td>Fixed Cart Discount</td> 
									{{/ifCond}}
									{{!--End DiscountType --}}
									<td class="text_blue_color">{{this.sales_count}}</td>
									<td>{{this.discount_value}}</td>
									{{!-- satusCode --}}
									{{#ifCond this.status "==" ../statusCode.ACTIVE}}
									<td class="text_green_color">Active</td>
									{{else ifCond this.status "==" ../statusCode.SUSPENDED}}
									<td class="text_orange_color">Suspended</td>
									{{else ifCond this.status "==" ../statusCode.SOLDOUT}}
									<td class="text_red_color">Sold Out</td>
									{{/ifCond}}
									{{!-- End status Code--}}
								</tr>
								{{/each}}
							</tbody>
						</table>
					</div>
					<div class="row">
						<div class="col-md-6">
							<p class="vend_edit_lists_pstyle">{{this.count}} items total</p>
						</div>
						<div class="col-md-6">
							<p class="vend_edit_lists_pstyle float-right">Entries per page: 
								<a href="/coupons?limit=10"> 10</a>
								<a href="/coupons?limit=25"> 25</a>
								<a href="/coupons?limit=100"> 100</a>
								<a href="/coupons?limit=10"> All </a>
							</p>
						</div>
					</div>
					{{!-- Pagination starts --}}
					<div class="row">
						<div style="margin:0 auto;width:100px;">
							{{#pagination collectionSize page pageSize maxSize}}
							<nav aria-label="Page navigation example">
								<ul class="pagination justify-content-center">
									{{#each pages}}
									<li class="page-item {{#if isCurrent}} active {{/if}}">
										<a class="page-link" href="coupons?page={{page}}&limit={{../../pageSize}}">{{page}}</a>
									</li>
									{{/each}}
								</ul>
							</nav>
							{{/pagination}}
						</div>
					</div>
					{{!-- Pagination starts --}}
				</div>
				<div class="col-md-2">
				</div>				
			</div>
		</div>
	</div>
</section>
{{> footer/footer}}