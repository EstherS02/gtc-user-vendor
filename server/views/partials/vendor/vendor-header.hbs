<script type="text/javascript">
	var vendorInfo = {{{ DisplayJSON VendorDetail }}}
	var userInfo = {{{ DisplayJSON LoggedInUser }}}

	$("body").on("click", "#followVendor", function() {
		if(userInfo.email){
			var  dataItem = {};
			dataItem.vendor_id = vendorInfo.id;
			$.ajax({
				type: "PUT",
				url: "/api/users/user-vendor-follow",
				data: dataItem,
				success: function(result) {
					if (result){
						location.reload();
					}
					// console.log(result);
					// console.log(vendorInfo.VendorFollowers)
				}
			});

		}else{
			location.href = "/login";
		}
	});


</script>
<script>
	var vendorInfo = {{{ DisplayJSON VendorDetail }}}
	// var marketplacetype = {{{ DisplayJSON selectedPage}}}
	var marketPlaceType = {{{DisplayJSON queryURI}}}

	$(document).ready(function () {
		$("#vendorSearchForm").submit(function (e) {
			e.preventDefault();
			let formInput = $("#vendorSearchForm :input").filter(function (index, element) {
				return $(element).val() != '';
			}).serialize();
			if(marketPlaceType == ''){
			window.location.href = 'products/search?vendor_id='+vendorInfo.id+'&'+ formInput;
			}else{
				window.location.href = 'products/search?vendor_id='+vendorInfo.id+'&'+ formInput+'&marketplace_id='+marketPlaceType.marketplace_id;
			}
		});
	});
</script>
{{#navbarSetting LoggedInUser.id selectedPage}}

<div class="vendor-header">
	<div class="vp-cover">
		<img {{#if VendorDetail.vendor_cover_pic_url}} src="{{VendorDetail.vendor_cover_pic_url}}"  {{else}}src="gtc-assets/images/inner_page_bnr.jpg"{{/if}} class="object-fit">
	</div>
	<div class="vp-title">
		<div class="gtc-container">
			<h2>{{this.VendorDetail.vendor_name}}</h2>
		</div>
	</div>
	<div class="vp-menu">
		<div class="gtc-container">
			<nav class="navbar nav-menu navbar-expand-sm navbar-dark">
				<a class="vendor-logo" href="/vendor/{{this.VendorDetail.id}}">
					<img {{#if this.VendorDetail.vendor_profile_pic_url}}src="{{this.VendorDetail.vendor_profile_pic_url}}" {{else}} src="/img/avatar.png" {{/if}} alt="logo" title="Global Trade Connect">
				</a>
				<button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#vendorNavBar" aria-controls="vendorNavBar" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="navbar-collapse collapse" id="vendorNavBar">
					<div class="row col no-margins no-padding">
						<div class="col-md-8">
							<div class="vp-verified-follow d-inline-block">
							{{#if VendorDetail.VendorVerification}}
										<img src="../img/gtc-verified.png" alt="GTC Verified" />
										{{else}}
										<img src="../img/gtc-not-verified.jpg" alt="GTC Not Verified"/>
										{{/if}}
								{{#if LoggedInUser.id}}
											{{#ifCond LoggedInUser.Vendor.id "!=" VendorDetail.id}}
												{{#if VendorDetail.VendorFollowers}}
												<a href="javascript:;" id="followVendor" class="d-inline-block"><img src="../img/unfollow.png" alt="Follow"  /></a>
												{{else}}
												<a href="javascript:;" id="followVendor" class="d-inline-block"><img src="../img/follow.png" alt="Follow" /></a>
												{{/if}}
											{{/ifCond}}
										{{else}}
												{{!-- {{#if VendorDetail.VendorFollowers}} --}}
												<a href="/login" class="d-inline-block"><img src="../img/follow.png" alt="Follow"  /></a>
												{{!-- {{else}}
												<a  href="" id="followVendor"><img src="../img/follow.png" alt=" Follow"  />--}}</a>
												{{!-- {{/if}} --}}
										{{/if}}
							</div>
							<div class="vp-navmenu d-inline-block">
								<ul class="navbar-nav vp-nav d-inline-flex">
								{{!-- WHOLESALER --}}
									{{#ifCond VendorDetail.VendorPlans.[0].plan_id "==" Plan.WHOLESALER}}

									<li class="nav-item {{#ifCond selectedPage '==' 'wholesale'}} active {{/ifCond}}">
										<a  href="/vendor/wholesale/{{VendorDetail.id}}" class="nav-link">WHOLESALE
										</a>
									</li>
									<li class="nav-item {{#ifCond selectedPage '==' 'shop'}} active {{/ifCond}}">
										<a  href="/vendor/shop/{{VendorDetail.id}}" class="nav-link">SHOP
										</a>
									</li>
									<li class="nav-item {{#ifCond selectedPage '==' 'services'}} active {{/ifCond}}">
										<a  href="/vendor/services/{{VendorDetail.id}}" class="nav-link">SERVICES
										</a>
									</li>
									<li class="nav-item {{#ifCond selectedPage '==' 'lifestyle'}} active {{/ifCond}}">
										<a  href="/vendor/lifestyle/{{VendorDetail.id}}" class="nav-link">LIFESTYLE
										</a>
									</li>
									{{/ifCond}}
									{{!-- BULK_BUYER --}}
									{{#ifCond VendorDetail.VendorPlans.[0].plan_id "==" Plan.BULK_BUYER}}

									<li class="nav-item {{#ifCond selectedPage '==' 'wholesale'}} active {{/ifCond}}">
										<a  href="/vendor/wholesale/{{VendorDetail.id}}" class="nav-link">WHOLESALE
										</a>
									</li>
									<li class="nav-item {{#ifCond selectedPage '==' 'shop'}} active {{/ifCond}}">
										<a  href="/vendor/shop/{{VendorDetail.id}}" class="nav-link">SHOP
										</a>
									</li>
									<li class="nav-item {{#ifCond selectedPage '==' 'services'}} active {{/ifCond}}">
										<a  href="/vendor/services/{{VendorDetail.id}}" class="nav-link">SERVICES
										</a>
									</li>
									<li class="nav-item {{#ifCond selectedPage '==' 'lifestyle'}} active {{/ifCond}}">
										<a  href="/vendor/lifestyle/{{VendorDetail.id}}" class="nav-link">LIFESTYLE
										</a>
									</li>
									{{/ifCond}}
									{{!-- PUBLIC_SELLER --}}
									{{#ifCond VendorDetail.VendorPlans.[0].plan_id "==" Plan.PUBLIC_SELLER}}
									<li class="nav-item {{#ifCond selectedPage '==' 'shop'}} active {{/ifCond}}">
										<a  href="/vendor/shop/{{VendorDetail.id}}" class="nav-link">SHOP
										</a>
									</li>
									<li class="nav-item {{#ifCond selectedPage '==' 'services'}} active {{/ifCond}}">
										<a  href="/vendor/services/{{VendorDetail.id}}" class="nav-link">SERVICES
										</a>
									</li>
									<li class="nav-item {{#ifCond selectedPage '==' 'lifestyle'}} active {{/ifCond}}">
										<a  href="/vendor/lifestyle/{{VendorDetail.id}}" class="nav-link">LIFESTYLE
										</a>
									</li>
									{{/ifCond}}

									{{#ifCond VendorDetail.VendorPlans.[0].plan_id "==" Plan.LIFESTYLE_PROVIDER}}
									<li class="nav-item {{#ifCond selectedPage '==' 'lifestyle'}} active {{/ifCond}}">
										<a  href="/vendor/lifestyle/{{VendorDetail.id}}" class="nav-link">LIFESTYLE
										</a>
									</li>
									{{/ifCond}}
									{{!-- LIFESTYLE_PROVIDER --}}
									{{#ifCond VendorDetail.VendorPlans.[0].plan_id "==" Plan.SERVICE_PROVIDER}}
									<li class="nav-item {{#ifCond selectedPage '==' 'services'}} active {{/ifCond}}">
										<a  href="/vendor/services/{{VendorDetail.id}}" class="nav-link">SERVICES
										</a>
									</li>
									{{/ifCond}}
									{{!-- STARTER_SELLER --}}
									{{#ifCond VendorDetail.VendorPlans.[0].plan_id "==" Plan.STARTER_SELLER}}
									<li class="nav-item {{#ifCond selectedPage '==' 'shop'}} active {{/ifCond}}">
										<a  href="/vendor/shop/{{VendorDetail.id}}" class="nav-link">SHOP
										</a>
									</li>
									<li class="nav-item {{#ifCond selectedPage '==' 'services'}} active {{/ifCond}}">
										<a  href="/vendor/services/{{VendorDetail.id}}" class="nav-link">SERVICES
										</a>
									</li>
									<li class="nav-item {{#ifCond selectedPage '==' 'lifestyle'}} active {{/ifCond}}">
										<a  href="/vendor/lifestyle/{{VendorDetail.id}}" class="nav-link">LIFESTYLE
										</a>
									</li>
									{{/ifCond}}
									{{!-- Common Link --}}
									<li class="nav-item {{#ifCond selectedPage '==' 'discussion-board'}} active {{/ifCond}}">
										<a  href="/vendor/discussion-board/{{VendorDetail.id}}" class="nav-link">DISCUSSION BOARD
										</a>
									</li>
									<li class="nav-item {{#ifCond selectedPage '==' 'about'}} active {{/ifCond}}">
										<a  href="/vendor/about/{{VendorDetail.id}}" class="nav-link">ABOUT
										</a>
									</li>
									<li class="nav-item {{#ifCond selectedPage '==' 'support'}} active {{/ifCond}}">
										<a  href="/vendor/support/{{VendorDetail.id}}" class="nav-link">SUPPORT
										</a>
									</li>
									{{#ifCond LoggedInUser.Vendor.id "==" VendorDetail.id}}
									<li class="nav-item dropdown">
										<a class="nav-link" href="#" id="navbardrop" data-toggle="dropdown">
											<i class="fas fa-ellipsis-h"></i>
										</a>
										<div class="dropdown-menu dropdown-menu-list" aria-labelledby="dropdownMenuButton">
												<ul>
													<li><a href="/edit-listing">Edit Listings</a></li>
													<li><a href="/edit-listing">Edit Listings</a></li>
													<li><a href="/vendor/order-history">Order History</a></li>
													<li><a href="/coupons">Edit/Add Coupons</a></li>
													<li><a href="/reporting/performance">Reporting</a></li>
													<div class="hr-line-solid"></div>
													<li><a href="/reviews">See My Reviews</a></li>
													<li><a href="/promote-store">Store Branding</a></li>
													<li><a href="/notifications">Notification Settings</a></li>
													<li><a href="/social-profile">Social Profile Settings</a></li>
													<li><a href="/shipping-settings">Shipping Settings</a></li>
													<li><a href="/payment-settings">Payment Settings</a></li>
													<li><a href="/verification">Get GTC Verified</a></li>
													<li><a href="/gtc-talk">GTC Talk Settings</a></li>
												</ul>
											</div>
									</li>
									{{/ifCond}}
								</ul>
							</div>
						</div>
						<div class="col-md-4 p-n-r" style="margin: auto;">
							<form id="vendorSearchForm" class="search-form-home">
								<div class="input-group search-input-group">
									<input type="search" class="form-control form-control-sm" id="inputVSearchText" name="keyword" placeholder="Search {{this.VendorDetail.vendor_name}}" aria-label="...">
									<button type="submit" class="btn btn-sm btn-gtc">
										<i class="fa fa-search"></i>
									</button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</nav>
		</div>
	</div>
</div> 
{{else}}
<div class="vendor-header">
	<div class="vp-cover">
		<img src="gtc-assets/images/inner_page_bnr.jpg" class="object-fit">
	</div>
	<div class="vp-title">
		<div class="gtc-container">
			<h2>GTC Products<a href="/login" style="font-size:15px;color:#fff ">(Login to view vendor detail)</h2>
		</div>
	</div>
	<div class="vp-menu">
		<div class="gtc-container">
			<nav class="navbar nav-menu navbar-expand-sm navbar-dark">
				<a class="vendor-logo" href="/">
					<img src="gtc-assets/img/logo.svg" alt="logo" title="Global Trade Connect">
				</a>
			</nav>
		</div>
	</div>
</div> 
{{/navbarSetting}}